<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">

    <body>
        <div th:fragment="body">
            <div class="row col-md-12">
                <div id="date-range-picker" class="pull-left" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc; margin-bottom: 5px;">
                    <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                    <span id="date-range-from" th:text="${#temporals.format(stats.dateFrom, 'yyyy-MM-dd')}">April 15, 2018</span>
                    <span id="date-range-until" th:text="${#temporals.format(stats.dateUntil, 'yyyy-MM-dd')}">April 21, 2018</span>
                    <b class="caret"></b>
                </div>
            </div>
            <div class="row top_tiles">
                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <div class="tile-stats">
                        <div class="icon"><i class="fa fa-exchange"></i>
                        </div>
                        <div id="callsThisPeriod" class="count" th:text="${stats.callsThisPeriod}">179</div>

                        <h3 th:text="#{admin.dashboard.stats.calls.label}">Title</h3>
                        <p th:text="#{admin.dashboard.stats.calls.desc}">Description</p>
                    </div>
                </div>
                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <div class="tile-stats">
                        <div class="icon"><i class="fa fa-close"></i>
                        </div>
                        <div id="errorsThisPeriod" class="count" th:text="${stats.errorsThisPeriod}">179</div>

                        <h3 th:text="#{admin.dashboard.stats.errors.label}">Title</h3>
                        <p th:text="#{admin.dashboard.stats.errors.desc}">Description</p>
                    </div>
                </div>
                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <div class="tile-stats">
                        <div class="icon"><i class="fa fa-line-chart"></i>
                        </div>
                        <div id="callsDiff" class="count" th:text="${stats.callsDiff}">179</div>

                        <h3 th:text="#{admin.dashboard.stats.callsdiff.label}">Title</h3>
                        <p th:text="#{admin.dashboard.stats.callsdiff.desc}">Description</p>
                    </div>
                </div>
                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <div class="tile-stats">
                        <div class="icon"><i class="fa fa-users"></i>
                        </div>
                        <div id="users" class="count" th:text="${stats.users}">179</div>

                        <h3 th:text="#{admin.dashboard.stats.users.label}">Title</h3>
                        <p th:text="#{admin.dashboard.stats.users.desc}">Description</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 col-sm-3 col-xs-12">
                    <div class="x_panel">
                        <div class="x_title">
                            <h3>HTTP response codes</h3>
                            <p th:text="#{admin.dashboard.stats.http.response.codes.desc}">Description</p>
                            
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div style="width: 80%; height: 80%; margin-left: 10%;">
                                <canvas class="canvasDoughnut" id="httpStatsChartCanvas" height="200" width="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-3 col-xs-12">
                    <div class="x_panel">
                        <div class="x_title">
                            <h3>Calls per API user</h3>
                            <p th:text="#{admin.dashboard.stats.calls.api.user.desc}">Description</p>
                            
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div style="width: 80%; height: 80%; margin-left: 10%;">
                                <canvas class="canvasDoughnut" id="userStatsChartCanvas" height="200" width="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-12">
                    <div class="x_panel">
                        <div class="x_title">
                            <h3>Top API users</h3>
                            <p th:text="#{admin.dashboard.top.api.users.desc}">Description</p>
                            
                            <div class="clearfix"></div>
                        </div>
                        <div id="userStatisticsTable" class="x_content">


                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-8 col-sm-8 col-xs-12">
                    <div class="x_panel">
                        <div class="x_title">
                            <h2>Service API Calls per Day
                                <small>Distribution over the selected date range</small>
                            </h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div class="demo-container" style="height:300px">
                                <div class="demo-placeholder" style="padding: 0px; position:relative;">
                                    <canvas class="canvasDoughnut" id="statsPerDayLineChartCanvas" width="1100" height="300"
                                            style="margin: 15px 10px 10px 10px"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 col-sm-4 col-xs-12">
                    <div class="x_panel">
                        <div class="x_title">
                            <h2>
                                Gateway Health Monitor
                                <a data-toggle="modal" data-target=".help-gateway-health-monitor">
                                    <i class="fa fa-question-circle"></i>
                                </a>
                            </h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div class="demo-container" style="height:300px">

                                <!--
                                <div>
                                    <span th:if="${worstState == T(eu.coatrack.api.ProxyStates).CRITICAL or
                                            worstState == T(eu.coatrack.api.ProxyStates).WARNING">
                                        There is a problem to be checked.
                                        <span style="color:#ff2f2f">&#10006;</span>
                                    </span>
                                    <span th:if="${worstState == T(eu.coatrack.api.ProxyStates).OK}">
                                        No problems found.
                                        <span style="color:#23ac23">&#10004;</span>
                                    </span>
                                </div>

                                <table class="health-monitor-data-table">
                                    <tr>
                                        <th>Gateway Name</th>
                                        <th>Status</th>
                                        <th>Last Contact</th>
                                    </tr>
                                    <tr th:each="proxy : ${proxies}">
                                        <td th:text="${proxy.name}"></td>
                                        <td th:switch="${proxy.status}">
                                            <span th:case="${T(eu.coatrack.api.ProxyStates).CRITICAL}"
                                                  class="neutral-state-symbol critical-state"></span>
                                            <span th:case="${T(eu.coatrack.api.ProxyStates).WARNING}"
                                                  sclass="neutral-state-symbol warning-statet"></span>
                                            <span th:case="${T(eu.coatrack.api.ProxyStates).OK}"
                                                  class="neutral-state-symbol ok-state"></span>
                                        </td>
                                        <td th:text="${proxy.minutesPastSinceLastContact} + ' min ago'"></td>
                                    </tr>
                                </table>
                                -->

                                <!--
                                <div>
                                    No problems found.
                                    <span style="color: green">&#10004;</span>
                                </div>
                                -->

                                <div>
                                    There is a problem to be checked.
                                    <span style="color: red">&#10006;</span>
                                </div>

                                <table class="health-monitor-data-table">
                                    <tr>
                                        <th>Gateway Name</th>
                                        <th>Status</th>
                                        <th>Last Contact</th>
                                    </tr>
                                    <tr>
                                        <td>First Gateway</td>
                                        <td>
                                            <span class="neutral-state-symbol ok-state"></span>
                                        </td>
                                        <td>3 min ago</td>
                                    </tr>
                                    <tr>
                                        <td>Second Gateway</td>
                                        <td>
                                            <span class="neutral-state-symbol warning-state"></span>
                                        </td>
                                        <td>7 min ago</td>
                                    </tr>
                                    <tr>
                                        <td>Third Gateway</td>
                                        <td>
                                            <span class="neutral-state-symbol critical-state"></span>
                                        </td>
                                        <td>80 min ago</td>
                                    </tr>
                                </table>

                            </div>
                        </div>
                    </div>
                </div>
               
            </div>
        </div>

    </body>
</html>
